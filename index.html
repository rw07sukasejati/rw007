<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Verifikasi Surat</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 20px;
}
.card {
  background: #fff;
  max-width: 420px;
  margin: auto;
  padding: 20px;
  border-radius: 10px;
}
.status-valid {
  background:#e6f4ea;
  color:#137333;
  padding:12px;
  border-radius:6px;
  font-weight:bold;
  text-align:center;
}
.status-invalid {
  background:#fce8e6;
  color:#a50e0e;
  padding:12px;
  border-radius:6px;
  font-weight:bold;
  text-align:center;
}
.footer {
  margin-top:15px;
  font-size:12px;
  color:#777;
  text-align:center;
}
</style>
</head>

<body>
<div class="card">
  <h3 style="text-align:center">VERIFIKASI SURAT RT 022/007</h3>
  <div id="hasil">Memuat data...</div>
  <div class="footer" id="waktu"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby2XKiMA05OHdsc7bkzHoX_vPmnnn8Jj275H9QW5kNdT8bBdpnVAqMUPAuqlThYP4RY/exec";

const params = new URLSearchParams(window.location.search);
const id = params.get("id");
const hasil = document.getElementById("hasil");

if (!id) {
  hasil.innerHTML = `<div class="status-invalid">KODE VERIFIKASI TIDAK DITEMUKAN</div>`;
} else {
  fetch(`${SCRIPT_URL}?id=${id}`)
    .then(res => res.json())
    .then(data => {
      if (data.status === "valid") {
        hasil.innerHTML = `
          <div class="status-valid">✔ SURAT SAH / VALID</div>
          <p><b>Nomor Surat:</b><br>${data.nomor}</p>
          <p><b>Nama:</b><br>${data.nama}</p>
          <p><b>Jabatan:</b><br>${data.jabatan}</p>
          <p><b>Tanggal:</b><br>${data.tanggal}</p>
        `;
      } else {
        hasil.innerHTML = `<div class="status-invalid">✖ SURAT TIDAK TERDAFTAR</div>`;
      }
    })
    .catch(() => {
      hasil.innerHTML = `<div class="status-invalid">GAGAL MENGAMBIL DATA</div>`;
    });
}

const waktu = new Date();
document.getElementById("waktu").innerText =
  "Diakses: " + waktu.toLocaleString("id-ID") + " WIB";
</script>
</body>
</html>
